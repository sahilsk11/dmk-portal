{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\n\nvar Index =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props)); //this.state = { firstName: \"\", lastName: \"\", username: \"\", displayState: \"entry\", password: \"\", loading: false, newUser: false }\n\n    _this.state = {\n      displayState: \"username\",\n      loading: false,\n      inputValue: \"\",\n      newUser: false,\n      username: \"\"\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.authenticate = _this.authenticate.bind(_assertThisInitialized(_this));\n    _this.checkUsername = _this.checkUsername.bind(_assertThisInitialized(_this));\n    _this.setFirstName = _this.setFirstName.bind(_assertThisInitialized(_this));\n    _this.setLastName = _this.setLastName.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        inputValue: event.target.value\n      });\n    }\n  }, {\n    key: \"checkUsername\",\n    value: function checkUsername(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var username = this.state.inputValue;\n\n      if (username == \"\") {\n        alert(\"Please type in your username!\");\n        return;\n      } else if (username.length > 10) {\n        alert(\"That's a little too long!\");\n        return;\n      }\n\n      this.setState({\n        loading: true\n      });\n      var url = \"http://localhost:8080/check_user?username=\" + username;\n      fetch(url, {\n        method: 'POST'\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this2.setState({\n          displayState: data.state === \"new_user\" ? \"emailVerification\" : data.state,\n          cellID: data.cellID,\n          newUser: data.state === \"new_user\",\n          username: username,\n          loading: false,\n          inputValue: \"\"\n        });\n      })[\"catch\"](function (error) {\n        _this2.setState({\n          displayState: \"error\"\n        });\n      });\n      ;\n    }\n  }, {\n    key: \"authenticate\",\n    value: function authenticate(event) {\n      var _this3 = this;\n\n      event.preventDefault();\n      var token = this.state.inputValue;\n\n      if (token == \"\") {\n        alert(\"Please type in your login token!\");\n        return;\n      } else if (token.length > 10) {\n        alert(\"That's a little too long!\");\n        return;\n      }\n\n      var url = \"http://localhost:8080/authenticate?username=\" + this.state.username + \"&token=\" + token;\n      fetch(url, {\n        method: \"POST\"\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data.authenticated) {\n          if (_this3.state.newUser) {\n            _this3.setState({\n              displayState: \"newUserFirstName\",\n              inputValue: \"\"\n            });\n          } else {\n            document.cookie = \"token=\" + data.token + \"; path=/\";\n            window.location = \"/\";\n          }\n        } else {\n          _this3.setState({\n            displayState: \"invalidPassword\"\n          });\n        }\n      });\n    }\n  }, {\n    key: \"setFirstName\",\n    value: function setFirstName(event) {\n      event.preventDefault();\n\n      if (this.state.inputValue == \"\") {\n        alert(\"Please type in your name!\");\n        return;\n      } else if (this.state.inputValue.length > 10) {\n        alert(\"That's a little too long!\");\n        return;\n      }\n\n      this.setState({\n        firstName: this.state.inputValue,\n        inputValue: \"\",\n        displayState: \"newUserLastName\"\n      });\n    }\n  }, {\n    key: \"setLastName\",\n    value: function setLastName(event) {\n      event.preventDefault();\n      var lastName = this.state.inputValue;\n\n      if (lastName == \"\") {\n        alert(\"Please type in your last name!\");\n        return;\n      } else if (lastName.length > 10) {\n        alert(\"That's a little too long!\");\n        return;\n      }\n\n      var url = \"http://localhost:8080/add_name?cellID=\" + this.state.cellID + \"&firstName=\" + this.state.firstName + \"&lastName=\" + lastName;\n      fetch(url);\n      document.cookie = \"token=\" + this.state.username + \"; path=/\";\n      window.location = \"/\";\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var pageStates = {\n        username: {\n          title: \"Hey There ðŸ‘‹\",\n          subtitle: \"Welcome to the DMK Portal! Let's start with your Purdue username.\",\n          onFormSubmit: this.checkUsername,\n          inputPlaceholder: \"Purdue Username\"\n        },\n        emailVerification: {\n          title: \"Check your email ðŸ“«\",\n          subtitle: \"Check your Purdue email for authentication (or continue if password saved).\",\n          onFormSubmit: this.authenticate,\n          inputPlaceholder: \"top secret...\"\n        },\n        newUserFirstName: {\n          title: \"You look new! ðŸ‘€\",\n          subtitle: \"What's your first name?\",\n          onFormSubmit: this.setFirstName,\n          inputPlaceholder: \"What do you go by?\"\n        },\n        newUserLastName: {\n          title: \"...and last name ðŸŽ‰\",\n          subtitle: \"No middle name please.\",\n          onFormSubmit: this.setLastName,\n          inputPlaceholder: \"Who are your people?\"\n        },\n        invalidPassword: {\n          title: \"Uh oh ðŸ˜§\",\n          subtitle: \"That doesn't look right. Try copying the code exactly as it appears in the email.\",\n          onFormSubmit: this.authenticate,\n          inputPlaceholder: \"top secret...\"\n        },\n        error: {\n          title: \"Well, that's embarrassing ðŸ™ˆ\",\n          subtitle: \"There's an error on our end. Try again later!\",\n          onFormSubmit: this.authenticate,\n          inputPlaceholder: \"top secret...\",\n          hideForm: true\n        }\n      };\n      var stateElements = pageStates[this.state.displayState];\n      return __jsx(\"div\", {\n        className: \"jsx-1555840043\"\n      }, __jsx(Head, null, __jsx(\"title\", {\n        className: \"jsx-1555840043\"\n      }, \"DMK Portal - Login\"), __jsx(\"link\", {\n        href: \"/images/icon.png\",\n        rel: \"icon\",\n        className: \"jsx-1555840043\"\n      })), __jsx(NavBar, null), __jsx(ContentBox, {\n        title: stateElements.title,\n        subtitle: stateElements.subtitle\n      }, __jsx(\"form\", {\n        onSubmit: stateElements.onFormSubmit,\n        className: \"jsx-1555840043\"\n      }, __jsx(Input, {\n        onChange: this.handleChange,\n        value: this.state.inputValue,\n        placeholder: stateElements.inputPlaceholder,\n        hide: stateElements.hideForm\n      }), __jsx(Button, {\n        loading: this.state.loading,\n        hide: stateElements.hideForm\n      }))), __jsx(_JSXStyle, {\n        id: \"1555840043\"\n      }, [\"body{margin:0px;background-color:#F7F7FB;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;}\"]));\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\nvar NavBar =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(NavBar, _React$Component2);\n\n  function NavBar() {\n    _classCallCheck(this, NavBar);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NavBar).apply(this, arguments));\n  }\n\n  _createClass(NavBar, [{\n    key: \"render\",\n    value: function render() {\n      var navContainerStyle = {\n        width: \"100%\",\n        backgroundColor: \"#AB1B23\",\n        height: \"58px\"\n      };\n      var navImgStyle = {\n        width: \"50px\",\n        marginLeft: \"20px\",\n        marginTop: \"6px\"\n      };\n      return __jsx(\"div\", {\n        style: navContainerStyle\n      }, __jsx(\"img\", {\n        src: \"/images/icon.png\",\n        style: navImgStyle\n      }));\n    }\n  }]);\n\n  return NavBar;\n}(React.Component);\n\nvar ContentBox =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(ContentBox, _React$Component3);\n\n  function ContentBox() {\n    _classCallCheck(this, ContentBox);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ContentBox).apply(this, arguments));\n  }\n\n  _createClass(ContentBox, [{\n    key: \"render\",\n    value: function render() {\n      var styles = {\n        contentBoxStyle: {\n          backgroundColor: \"white\",\n          width: \"500px\",\n          boxShadow: \"0 4px 4px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)\",\n          display: \"block\",\n          margin: \"0px auto\",\n          marginTop: \"20px\",\n          overflow: \"scroll\",\n          height: \"350px\",\n          maxWidth: \"95%\"\n        },\n        boxTitleStyle: {\n          textAlign: \"center\",\n          paddingTop: \"30px\",\n          margin: \"0px\",\n          fontWeight: \"400\",\n          fontSize: \"35px\"\n        },\n        innerContentStyle: {\n          paddingTop: \"10px\",\n          width: \"95%\",\n          display: \"block\",\n          margin: \"0px auto\",\n          position: \"relative\"\n        },\n        subtitle: {\n          textAlign: \"center\",\n          fontWeight: \"300\",\n          marginTop: \"10px\",\n          paddingLeft: \"20px\",\n          paddingRight: \"20px\"\n        }\n      };\n      return __jsx(\"div\", {\n        style: styles.contentBoxStyle\n      }, __jsx(\"h3\", {\n        style: styles.boxTitleStyle\n      }, this.props.title), __jsx(\"h3\", {\n        style: styles.subtitle\n      }, this.props.subtitle), __jsx(\"div\", {\n        style: styles.innerContentStyle\n      }, this.props.children));\n    }\n  }]);\n\n  return ContentBox;\n}(React.Component);\n\nvar Input =\n/*#__PURE__*/\nfunction (_React$Component4) {\n  _inherits(Input, _React$Component4);\n\n  function Input() {\n    _classCallCheck(this, Input);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Input).apply(this, arguments));\n  }\n\n  _createClass(Input, [{\n    key: \"render\",\n    value: function render() {\n      var inputStyle = {\n        border: \"1px solid black\",\n        padding: \"6px\",\n        borderRadius: \"4px\",\n        fontSize: \"17px\",\n        display: \"block\",\n        margin: \"20px auto\",\n        textAlign: \"center\",\n        width: this.props.width\n      };\n\n      if (this.props.hide !== true) {\n        return __jsx(\"input\", {\n          name: this.props.name,\n          style: inputStyle,\n          value: this.props.value,\n          onChange: this.props.onChange,\n          placeholder: this.props.placeholder\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return Input;\n}(React.Component);\n\nvar Button =\n/*#__PURE__*/\nfunction (_React$Component5) {\n  _inherits(Button, _React$Component5);\n\n  function Button(props) {\n    var _this4;\n\n    _classCallCheck(this, Button);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(Button).call(this, props));\n    _this4.state = {\n      hover: false\n    };\n    return _this4;\n  }\n\n  _createClass(Button, [{\n    key: \"toggleHover\",\n    value: function toggleHover() {\n      this.setState({\n        hover: !this.state.hover\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var buttonStyle = {\n        fontSize: \"30px\",\n        border: \"none\",\n        backgroundColor: \"rgb(191, 49, 56)\",\n        color: \"white\",\n        width: \"100px\",\n        height: \"40px\",\n        cursor: \"pointer\",\n        outline: \"none\",\n        borderRadius: \"4px\",\n        display: \"block\",\n        margin: \"0px auto\",\n        marginTop: \"30px\"\n      };\n      var loadingSyle = {\n        width: \"30px\",\n        display: \"block\",\n        margin: \"0px auto\"\n      };\n\n      if (this.state.hover) {\n        buttonStyle.backgroundColor = \"#AB1B23\";\n      }\n\n      if (this.props.hide === true) {\n        return null;\n      }\n\n      if (this.props.loading) {\n        return __jsx(\"img\", {\n          src: \"/images/loading-white.gif\",\n          style: loadingSyle\n        });\n      } else {\n        return __jsx(\"div\", null, __jsx(\"button\", {\n          onMouseLeave: function onMouseLeave() {\n            return _this5.toggleHover();\n          },\n          onMouseEnter: function onMouseEnter() {\n            return _this5.toggleHover();\n          },\n          style: buttonStyle,\n          onClick: this.props.onClick\n        }, \"\\u2192\"));\n      }\n    }\n  }]);\n\n  return Button;\n}(React.Component);\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}