{"version":3,"file":"static/webpack/static/development/pages/login.js.641032e68a739a609331.hot-update.js","sources":["webpack:///./pages/login.js"],"sourcesContent":["import Head from 'next/head'\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { displayState: \"default\", loading: false, inputValue: \"\", newUser: false, username: \"\", firstName: \"\" }\n\n    this.handleChange = this.handleChange.bind(this);\n    this.skipEmail = this.skipEmail.bind(this);\n    this.confirmedEmail = this.confirmedEmail.bind(this);\n    this.authenticate = this.authenticate.bind(this);\n    this.checkUsername = this.checkUsername.bind(this);\n    this.setFirstName = this.setFirstName.bind(this);\n    this.setLastName = this.setLastName.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({ inputValue: event.target.value });\n  }\n\n  skipEmail() {\n    console.log(\"HI\")\n    this.setState({ displayState: \"authenticate\" })\n  }\n\n  validateInput(inputValue) {\n    if (inputValue == \"\") {\n      alert(\"Please type in your username!\")\n      return;\n    } else if (inputValue.length > 10) {\n      alert(\"That's a little too long!\")\n      return;\n    }\n  }\n\n  checkUsername(event) {\n    event.preventDefault();\n    const username = this.state.inputValue;\n    this.setState({ username, loading: true })\n\n    const url = \"http://localhost:8080/checkUser?username=\" + username;\n    fetch(url, {\n      method: 'POST'\n    }).then(response => response.json())\n      .then(data => {\n        this.setState({\n          displayState: data.state,\n          cellID: data.cellID,\n          loading: false,\n          inputValue: \"\",\n          newUser: data.state === \"newUser\",\n          firstName: data.firstName\n        });\n      }).catch((error) => {\n        this.setState({ displayState: \"error\" });\n      });\n  }\n\n  setFirstName(event) {\n    event.preventDefault();\n    this.setState({ firstName: this.state.inputValue, inputValue: \"\", displayState: \"setLastName\" });\n  }\n\n  setLastName(event) {\n    event.preventDefault();\n    this.setState({ lastName: this.state.inputValue, inputValue: \"\", displayState: \"returningUser\" });\n  }\n\n  confirmedEmail() {\n    const username = this.state.username;\n    const firstName = this.state.firstName;\n    const lastName = this.state.lastName;\n    this.setState({ loading: true })\n\n    const url = \"http://localhost:8080/sendEmail?username=\" + username + \"&firstName=\" + firstName + \"&lastName=\" + lastName + \"&newUser=\" + this.state.newUser + \"&cellID=\" + this.state.cellID;\n    fetch(url).then(response => response.json())\n      .then(data => {\n        if (data.success) {\n          this.setState({\n            displayState: \"authenticate\",\n            inputValue: \"\",\n            loading: false,\n          });\n        }\n      }).catch((error) => {\n        this.setState({ displayState: \"error\" });\n      });\n  }\n\n  authenticate(event) {\n    event.preventDefault();\n    const token = this.state.inputValue;\n\n    const url = \"http://localhost:8080/authenticate?username=\" + this.state.username + \"&token=\" + token;\n    fetch(url, {\n      method: \"POST\"\n    }).then(response => response.json())\n      .then(data => {\n        if (data.authenticated) {\n          document.cookie = \"token=\" + data.token + \"; path=/\";\n          window.location = \"/\";\n        } else {\n          this.setState({ displayState: \"invalidPassword\" })\n        }\n      })\n  }\n\n  renderBasedOnState() {\n    if (this.state.displayState == \"default\") {\n      return <InputContentBox title=\"Hey There 👋\" subtitle=\" Welcome to the DMK Portal! Let's start with your Purdue username.\" onFormSubmit={this.checkUsername} onChange={this.handleChange} inputValue={this.state.inputValue} placeholder=\"Purdue username\" loading={this.state.loading} />;\n    } else if (this.state.displayState == \"newUser\") {\n      return <InputContentBox title=\"You look new! 👀\" subtitle=\"What's your first name?\" onFormSubmit={this.setFirstName} onChange={this.handleChange} inputValue={this.state.inputValue} placeholder=\"What do you go by?\" loading={this.state.loading} />;\n    } else if (this.state.displayState == \"setLastName\") {\n      return <InputContentBox title=\"...and last name 🎉\" subtitle=\"No middle name please.\" onFormSubmit={this.setLastName} onChange={this.handleChange} inputValue={this.state.inputValue} placeholder=\"Who are your people?\" loading={this.state.loading} />;\n    } else if (this.state.displayState == \"returningUser\") {\n      return <DialogueBox title={\"Welcome, \" + this.state.firstName + \" 🐶\"} username={this.state.username} onSubmit={this.confirmedEmail} skipEmail={this.skipEmail} />\n    } else if (this.state.displayState == \"authenticate\") {\n      return <InputContentBox title=\"Identify Yourself 🔐\" subtitle=\"You should have received your code via email.\" onFormSubmit={this.authenticate} onChange={this.handleChange} inputValue={this.state.inputValue} placeholder=\"Top secret\" loading={this.state.loading} />;\n    } else if (this.state.displayState == \"invalidPassword\") {\n      return <InputContentBox title=\"Not quite 😕\" subtitle=\"That code is incorrect. Did you get caps right?\" onFormSubmit={this.authenticate} onChange={this.handleChange} inputValue={this.state.inputValue} placeholder=\"Top secret\" loading={this.state.loading} />;\n    } else {\n      return <ErrorBox />;\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Head>\n          <title>DMK Portal - Login</title>\n          <link href=\"/images/icon.png\" rel=\"icon\" />\n        </Head>\n        <NavBar />\n        {this.renderBasedOnState()}\n        <style jsx global>\n          {`\n            body {\n              margin: 0px;\n              background-color: #F7F7FB;\n              font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;\n\n              -webkit-font-smoothing: antialiased;\n            }\n            \n          `}\n        </style>\n      </div >\n    );\n  }\n}\n\nclass NavBar extends React.Component {\n  render() {\n    const navContainerStyle = {\n      width: \"100%\",\n      backgroundColor: \"#AB1B23\",\n      height: \"58px\"\n    }\n    const navImgStyle = {\n      width: \"50px\",\n      marginLeft: \"20px\",\n      marginTop: \"6px\"\n    }\n    return (\n      <div style={navContainerStyle}>\n        <img src=\"/images/icon.png\" style={navImgStyle} />\n      </div>\n    )\n  }\n}\n\nclass InputContentBox extends React.Component {\n  render() {\n    return (\n      <ContentBox title={this.props.title} subtitle={this.props.subtitle}>\n        <form onSubmit={this.props.onFormSubmit}>\n          <Input onChange={this.props.onChange} value={this.props.inputValue} placeholder={this.props.placeholder} />\n          <Button loading={this.props.loading} buttonText=\"→\" />\n        </form>\n      </ContentBox>\n    );\n  }\n}\n\nclass ErrorBox extends React.Component {\n  render() {\n    return (\n      <ContentBox title=\"Well, that's embarrassing 🙈\" subtitle=\"There's an error on our end. Try again later!\" />\n    );\n  }\n}\n\nclass DialogueBox extends React.Component {\n  renderSkip() {\n    if (this.props.displaySkip) {\n      return <a style={anchorStyle} href=\"#\" onClick={this.props.skipEmail}>I know my code</a>;\n    }\n  }\n  \n  render() {\n    const anchorStyle = {\n      textAlign: 'center',\n      fontSize: \"12px\",\n      display: \"block\",\n      paddingBottom: \"10px\"\n    }\n    \n    return (\n      <ContentBox title={this.props.title} subtitle={\"We're sending your code to \" + this.props.username + \"@purdue.edu.\"}>\n        <Button buttonText=\"Email me the code\" fontSize=\"15\" width=\"180\" onClick={this.props.onSubmit} />\n        <div style={{ marginTop: \"40px\" }}>\n          <a style={anchorStyle} href=\"#\" onClick={this.props.skipEmail}>I know my code</a>\n          <a style={anchorStyle} href=\"#\" onClick={() => location.reload()}>Oops - wrong email!</a>\n        </div>\n\n      </ContentBox>\n    );\n  }\n}\n\nclass ContentBox extends React.Component {\n  render() {\n    let styles = {\n      contentBoxStyle: {\n        backgroundColor: \"white\",\n        width: \"500px\",\n        boxShadow: \"0 4px 4px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)\",\n        display: \"block\",\n        margin: \"0px auto\",\n        marginTop: \"20px\",\n        overflow: \"scroll\",\n        height: \"350px\",\n        maxWidth: \"95%\"\n      },\n      boxTitleStyle: {\n        textAlign: \"center\",\n        paddingTop: \"30px\",\n        margin: \"0px\",\n        fontWeight: \"400\",\n        fontSize: \"35px\"\n      },\n      innerContentStyle: {\n        paddingTop: \"10px\",\n        width: \"95%\",\n        display: \"block\",\n        margin: \"0px auto\",\n        position: \"relative\"\n      },\n      subtitle: {\n        textAlign: \"center\",\n        fontWeight: \"300\",\n        marginTop: \"10px\",\n        paddingLeft: \"20px\",\n        paddingRight: \"20px\"\n      }\n    }\n\n    return (\n      <div style={styles.contentBoxStyle}>\n        <h3 style={styles.boxTitleStyle}>{this.props.title}</h3>\n        <h3 style={styles.subtitle}>{this.props.subtitle}</h3>\n        <div style={styles.innerContentStyle}>\n          {this.props.children}\n        </div>\n      </div>\n    )\n  }\n}\n\nclass Input extends React.Component {\n  render() {\n    const inputStyle = {\n      border: \"1px solid black\",\n      padding: \"6px\",\n      borderRadius: \"4px\",\n      fontSize: \"17px\",\n      display: \"block\",\n      margin: \"20px auto\",\n      textAlign: \"center\",\n      width: this.props.width\n    }\n    if (this.props.hide !== true) {\n      return (\n        <input name={this.props.name} style={inputStyle} value={this.props.value} onChange={this.props.onChange} placeholder={this.props.placeholder} />\n      )\n    } return null;\n  }\n}\n\nclass Button extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hover: false }\n  }\n  toggleHover() {\n    this.setState({ hover: !this.state.hover });\n  }\n  render() {\n    let buttonStyle = {\n      fontSize: this.props.fontSize == undefined ? \"30px\" : this.props.fontSize + \"px\",\n      border: \"none\",\n      backgroundColor: \"rgb(191, 49, 56)\",\n      color: \"white\",\n      width: this.props.width == undefined ? \"100px\" : this.props.width + \"px\",\n      height: \"40px\",\n      cursor: \"pointer\",\n      outline: \"none\",\n      borderRadius: \"4px\",\n      display: \"block\",\n      margin: \"0px auto\",\n      marginTop: \"30px\"\n    }\n    const loadingSyle = {\n      width: \"30px\",\n      display: \"block\",\n      margin: \"0px auto\"\n    }\n    if (this.state.hover) {\n      buttonStyle.backgroundColor = \"#AB1B23\"\n    }\n    if (this.props.hide === true) {\n      return null;\n    }\n    if (this.props.loading) {\n      return (\n        <img src=\"/images/loading-white.gif\" style={loadingSyle} />\n      )\n    } else {\n      return (\n        <div>\n          <button onMouseLeave={() => this.toggleHover()} onMouseEnter={() => this.toggleHover()} style={buttonStyle} onClick={this.props.onClick}>{this.props.buttonText}</button>\n        </div>\n      )\n    }\n  }\n}\n\nexport default Index;\n"],"mappings":"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","sourceRoot":""}